<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-info">
  <div class="container-fluid">
    <button class="btn btn-outline-light me-2" (click)="goBack()">
      <i class="fas fa-arrow-left"></i> Volver
    </button>
    <span class="navbar-brand mb-0 h1">
      <i class="fas fa-list-alt"></i> Mis solicitudes
    </span>
    <button class="btn btn-outline-light" (click)="logout()">
      <i class="fas fa-sign-out-alt"></i> Salir
    </button>
  </div>
</nav>

<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h2 class="mb-4">
        <i class="fas fa-clipboard-list"></i> Mis solicitudes de inscripción
      </h2>

      <!-- Loading -->
      <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3 text-muted">Cargando solicitudes...</p>
      </div>

      <!-- Sin solicitudes -->
      <div *ngIf="!loading && solicitudes.length === 0" class="alert alert-info">
        <div class="d-flex align-items-center">
          <i class="fas fa-info-circle fa-2x me-3"></i>
          <div>
            <strong>No tienes solicitudes aún</strong>
            <p class="mb-0 mt-1">
              <a routerLink="/estudiante/solicitar-inscripcion" class="alert-link">
                Haz clic aquí para solicitar inscripción a un curso
              </a>
            </p>
          </div>
        </div>
      </div>

      <!-- Tabla de solicitudes -->
      <div *ngIf="!loading && solicitudes.length > 0" class="card shadow">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="table-light">
                <tr>
                  <th>Curso</th>
                  <th>Fecha de solicitud</th>
                  <th>Estado</th>
                  <th>Motivo (si rechazada)</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let solicitud of solicitudes">
                  <td>
                    <strong>{{ solicitud.cursoNombre }}</strong>
                  </td>
                  <td>
                    <i class="fas fa-calendar me-1"></i>
                    {{ formatDate(solicitud.fechaSolicitud) }}
                  </td>
                  <td>
                    <span class="badge" [ngClass]="getEstadoBadgeClass(solicitud.estado)">
                      <i class="fas"
                         [ngClass]="{
                           'fa-clock': solicitud.estado === 'pendiente',
                           'fa-check-circle': solicitud.estado === 'aceptada',
                           'fa-times-circle': solicitud.estado === 'rechazada'
                         }"></i>
                      {{ solicitud.estado | titlecase }}
                    </span>
                  </td>
                  <td>
                    <span *ngIf="solicitud.motivoRechazo" class="text-danger">
                      <i class="fas fa-exclamation-triangle me-1"></i>
                      {{ solicitud.motivoRechazo }}
                    </span>
                    <span *ngIf="!solicitud.motivoRechazo" class="text-muted">-</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Botón para nueva solicitud -->
      <div *ngIf="!loading && solicitudes.length > 0" class="mt-4 text-center">
        <a routerLink="/estudiante/solicitar-inscripcion" class="btn btn-primary btn-lg">
          <i class="fas fa-plus-circle me-2"></i>
          Solicitar inscripción a otro curso
        </a>
      </div>
    </div>
  </div>
</div>
